<!doctype html>
<html lang="en">

    <%- include('./partials/header', title, page)%>
    <%
        let weatherimage = "";
        let currweather = data[0].current.skytext;

        if (currweather == 'Mostly Cloudy' || currweather == 'Cloudy' || currweather == 'Partly Cloudy'){
            weatherimage = "https://www.novinite.com/media/images/2020-02/photo_verybig_203272.jpg";
        }else if (currweather == 'Clear' || currweather == 'Sunny' || currweather == 'Partly Sunny'){
            weatherimage = "https://ak.picdn.net/shutterstock/videos/19907704/thumb/1.jpg";
        }else if (currweather == 'Mostly Rainy' || currweather == 'Light Rain' || currweather == 'Rain Showers'){
            weatherimage = "https://i0.wp.com/www.milkwood.co.za/blog/wp-content/uploads/2018/11/Rainy-day-in-Knysna.jpg?fit=700%2C400&ssl=1";
        }else{
            weatherimage = "https://images.theconversation.com/files/232705/original/file-20180820-30593-1nxanpj.jpg?ixlib=rb-1.1.0&q=45&auto=format&w=496&fit=clip";
        }
    %>

    <body>    
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="/home">Weather Application</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        <a class="nav-link <%if (page=='home'){%>active<%}%>" aria-current="page" href="/home">Home</a>
                    </div>
                    <div class="navbar-nav">
                        <a class="nav-link <%if (page=='other'){%>active<%}%>" aria-current="page" href="/other">Other</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container-lg my-5">
            <h3><%= data[0].location.name%></h3>
            <p><%= data[0].location.lat%>ºN <%= data[0].location.long%>ºE</p>
            <div class="container-flex mt-4 p-4 bg-light" >
                <h2 class="mb-3">Today's weather</h2>
                <div class="card mx-auto" style="width: 18rem;">
                    <div class="card-header">
                        <div class="row">
                            <div class="col-3">
                                <h4><%=data[0].current.temperature%> º</h4>
                            </div>
                            <div class="col-3">
                                <img src="<%= data[0].current.imageUrl%>" alt="...">
                            </div>
                            <div class="col">
                                <h5><%=data[0].current.skytext%></h5>
                            </div>
                        </div>
                    </div>
                    <img src="<%= weatherimage%>" class="card-img-top" alt="...">
                    <div class="card-body">
                        <p class="card-text"> Feels like: <%=data[0].current.feelslike%></p>
                        <p class="card-text"> Humidity: <%=data[0].current.humidity%></p>
                        <p class="card-text"> Wind: <%=data[0].current.winddisplay%></p>
                        <p class="card-text"><small class="text-muted">Updated today at <%=data[0].current.observationtime%></small></p>
                    </div>
                </div>
            </div>
            <h4 class="mt-3"><%= data[0].location.name%> 4 Day Forecast</h4>
            <div class="row mx-auto">
                <%

                    for(var i=1; i<5; i++){
                        
                        let forecastimage = "";
                        let forweather = data[0].forecast[i].skytextday;
        
                        if (forweather == 'Mostly Cloudy' || forweather == 'Cloudy' || forweather == 'Partly Cloudy'){
                            forecastimage = "https://www.novinite.com/media/images/2020-02/photo_verybig_203272.jpg";
                        }else if (forweather == 'Clear' || forweather == 'Sunny' || forweather == 'Partly Sunny'){
                            forecastimage = "https://ak.picdn.net/shutterstock/videos/19907704/thumb/1.jpg";
                        }else if (forweather == 'Mostly Rainy' || forweather == 'Light Rain' || forweather == 'Rain Showers'){
                            forecastimage = "https://i0.wp.com/www.milkwood.co.za/blog/wp-content/uploads/2018/11/Rainy-day-in-Knysna.jpg?fit=700%2C400&ssl=1";
                        }else{
                            forecastimage = "https://images.theconversation.com/files/232705/original/file-20180820-30593-1nxanpj.jpg?ixlib=rb-1.1.0&q=45&auto=format&w=496&fit=clip";
                        }
                        
                        %>
                        <div class="col-sm-3 mt-3">
                            <div class="card" style="width: 18rem;">
                                <div class="card-header">
                                    <div class="row">
                                        <div class="col-3">
                                            <img src="http://blob.weather.microsoft.com/static/weather4/en-us/law/<%= data[0].forecast[i].skycodeday%>.gif" alt="...">
                                        </div>
                                        <div class="col">
                                            <h5><%=data[0].forecast[i].skytextday%></h5>
                                        </div>
                                    </div>
                                </div>
                                <img src="<%= forecastimage%>" class="card-img-top" alt="...">
                                <div class="card-body">
                                    <div class="row mb-2">
                                        <div class="col">
                                            <p class="card-text">Low: <%=data[0].forecast[i].low%></p>
                                        </div>
                                        <div class="col">
                                            <p class="card-text">High: <%=data[0].forecast[i].high%></p>
                                        </div>
                                    </div>
                                    <p class="card-text">Chances of rain: <%=data[0].forecast[i].precip%> %</p>
                                    <p class="card-text"><small class="text-muted">This <%=data[0].forecast[i].day%></small></p>
                                </div>
                            </div>
                        </div>    
                    <%}
                %>
            </div>
        </div>

        
        <!-- <p></p> -->

        
        



        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    </body>
</html>